
next: text

have to add durational feature to displayNarratorText()



later:
- dialog/text (look at some threejsfundamentals articles including this one https://threejsfundamentals.org/threejs/lessons/threejs-align-html-elements-to-3d.html )
- just a another person to talk to that is like "there's not much to see here yet... sorry :)" maybe they're on a computer
- make sure it works on mobile. this might involve changig the camera zoom based on the dimensions of the viewport (portrait should probably be zoomed in more)
- putting it online
- multiplayer
- maybe try to  make some fireflies or a little fire
- ooo myabe some stars
- trees?
- hold left-click to move
- camera: try differnt heights and/or angles
- camera: scroll to zoom in or out
- better ground texture with render target? https://threejsfundamentals.org/threejs/lessons/threejs-rendertargets.html
VCR/CRT effect like from https://twitter.com/puppet_sunsun/status/1417860643890208768?s=20
- maybe can play with 'exposure' to simulate your eyes adjusting to the dark (like when the player is close to the fire, everything else is dark). this seems like a very helpful example: https://threejs.org/examples/#webgl_lights_physical
- populate the landscape with some trees
- write some wrapper code around GUI to make it quick to set up controls for arbitrary params

# 8/11

ok so what do i even want to do with text... i want to:
- have dialogue textboxes when you talk to npcs
- have "narrator" textboxes for describing things
- let the player chat


lets do narrator textbox first because that seems easiest
i just want like a black rectangle with white Times new roman text on it
default as hell

ugh CSS. why is the text box breaking at lines instead of just expanding to the right?

also if i set the max-width to 100%, there's no longer a background color??

oh wait so it's setting the width to the size of the biggest word...
if i set max-width to 100%, that makes the width 0


# 8/13

i'm realizing now that what i want is to get this online asap
and so i want to get it into a state where it's somewhat presentable
but i want to do the least amount of work to get it there
and then i can add more stuff/content after it's up

i think right now it's actually ok as a playtestable thing
but for people to "get it" it needs:
-trees
-the ground to not be tiled/be a noticeable pattern
-some better lighting so you can see the character

but for today i'll work on the narrator text so that it's easier to use it, and so that it fades after some time

# 8/10

ok let's tweak the camera

i think it's time to get this to a releasable state... i just am getting bored of it. or maybe i just need to get back into it. idk. anyway lets tweak camera things

i like the simple camera window. now it's time to get the right window size/placement and camera height/angle. maybe the right settings will be dependent on what is in the actual game, but already there's some things that i want to set. like the window limit taht is closest to the camera shouldn't be too close, or else the player will have a hard time seeing where they're going

either way, i'll add some gui controls for these values

ok got some better window bounds. i do still want to tweak the camera height and angle... but i think for now it's fine actually. that's like a future todo

ok.. now do i want a character you can talk to? or multiplayer?
i think putting it online would make more excited to work on it... maybe i should do that first

nah i'm gonna do text box first. i'm excited about it
and of course if i do text box, i need a character
i'll probably have dialog text boxes, and then like narrator text boxes....

i imagine white Times New Roman on a black box. like Instagram. or darwin. or Old Films. would be interesting to see where this aesthetic comes from

i'm going back to the bible and using this article https://threejsfundamentals.org/threejs/lessons/threejs-align-html-elements-to-3d.html

i either want to use a texture with 2D text (using the cnavas) or use HTML elements... not really sure what i'll like better but using HTML elements sounds cool and webby

it works. next time i can position it 

# 7/30

lets implement some camera follow

honestly just keeping the player centered is pretty nice
maybe the window could be a circle?

# 7/29

yay resizing works. the technique of "if its taking a lot of time and sweat to get the last 5% just leave it to the next day when you're fresh" has worked a couple times now

ok now lets get camera working. i want the camera to follow the player, but not always have the player exactly centered (like in runescape). like some soft limits, like in mario 2d platformers.

i wonder what would happen if the player can rotate the camera... but i like the limitation that they can't, probably easier to design spaces. but can the player zoom? that would be nice

this video is interesting https://www.youtube.com/watch?v=pdvCO97jOQk
wow he's talking about eye-brain anatomy damn

o one interesting point from this vid is that the camera-window technique makes it harder to see where you're going
maybe can see how it works with window horizontal/ locking vertical or vice versa
could lerp-smooth too...
o and some manual control? with the mouse? like can sort of look to the left or right? that could be pretty cool
o hm the speedup-push-zone is pretty interesting for smoothing camera

o could even play with ease in and ease out when you're on drugs

could switch camera based on which /direction/ i'm walking
~21:00 is when he starts talking about some wild stuff

messing with the camera manually to set up certain scenes seems like a good idea too (32:00 when he's talk about limbo/aether)
or even doing things with the cam for certain interactions... zoom in when tapping a tree.?


ok let's implement something. I think i'll start with a "simple" window


# 7/28

getting window resizing to work

i think i need an event listener on window resizing?


# 7/23

ok no more light tweaking for now, let's work on something else

maybe it's time to implement canvas window resize

what was i excited about the other day? oh yeah being able to interact with different objects and craft things
smoking cigarettes - the butts dont go away
making drugs from tree sap
someone to welcome you - some jawa type looking person with a hood
text chat a la runescape or likelik2d
dust particles that you have to sweep away
minimal or no HUD

yeah maybe what i want to do next is just get it online. i think that'll shape what it becomes going forward

first lets fix window resizing
and a first try at camera behavior

and then we'll get it up live
maybe multiplayer????? maaaaaaybe

a passage from the bible: https://threejsfundamentals.org/threejs/lessons/threejs-responsive.html

i think what we ultimately want is no matter what the size of the window, or if the user resizes etc, the camera is centered on the player. (or somewhat-centered, maybe its centered on the middle of the camera bounds)



# 7/22

i think more light tweaking lol this takes forever

ok i think i got it to where i want it. time to do something else

do i want to make content now.... yeah i think lets go for a small story now and that can guide the next features that i make

# 7/21

i'll spend a little more time tweaking the lights... but i'm preeety happy with them??

# 7/20

going to keep trying to make these lights look nice

lower light

ok the new mystery is why does the point light cast more light when its farther away?
maybe the params i'm using are weird
or maybe the ground plane is werid bc of my texture?/ i dont think so though..

oh hm so maybe using lambert with big objects does'nt really work https://stackoverflow.com/questions/22204264/three-js-point-light-not-working-with-large-meshes

whatever man, i'll just switch to phong and turn the shininess off

yeah i think that looks better

# 7/19

yay i got bloom working. now let's actually try to make the lighting look good. my first instinct is to make a Lamp object that has some bloom effect but also a point light that lights things around it

i'm realizing now that irl, you only get this bloom effect off lights in low lighting (i.e. nighttime or dusk). so unless i want to create a whole day-night cycle, i guess i'm just simulating perpetual twilight


# 7/14

so i copypasted what i think is the right code from that example](https://github.com/mrdoob/three.js/blob/master/examples/webgl_postprocessing_unreal_bloom_selective.html)

but now i'm just getting this pure 0xff0000 red screen. maybe i should've done it in parts, at least more piece-wise than i did. after a couple hours of debugging i'm pretty burnt out. first thing i did today was post on the threejs discord asking for help, and now i'll get back into it.

i don't think it's something with the glsl bc i triple-checked the shaders and then tried modifying to see if anything changed... i googled "red screen threejs" etc. and haven't found anything

i wish there was a way to break up the postprocessing code... maybe there is but i don't understand it enough. maybe that's what i should try next

well i found at least one bug! it matters what order you add postprocessing passes to the effect composer. for my bloomComposer, i think i was rendering to the screen before doing the bloom pass

mmm still all red though...

i wonder if i can get just the sphere thing to render. so only the bloom pass?

oh yeah i got that. so i understand how that bit works i guesss..

turns out i was missing a couple of brackets and so i wasn't passing in my shaders as the `vertexShader` or `fragmentShader` arguments for the ShaderMaterial... there goes 3 hours of my life :)

ooo it works

# 7/12

ok lets try to implement this now



# 7/7

where were we
selective bloom

open source is nice: https://discourse.threejs.org/t/whats-the-easiest-recommended-way-to-create-glow-layers/4897/4

ok after reading that i still don't really understand what's going on

alright time to break out the ol notebook and start diagraming

i wonder if darkenning like they do in the example will work for me? might have to do something else to hide it?

we do need layers because that's how darkenNonBloomed() knows what to darken

so we need to traverse the entire scene tree every frame? there's probably a way to keep track of only the objs we bloom or something.. mm maybe not though

# 6/30

yeah the unreal bloom is much better 

# 6/29

for some reason the bloom pass by itself won't render to the screen?

that youtube video that i saw before with the sun - was it blooming the whole scene or just the sun? i think it was just the sun

o so there's an unrealbloompass too

# 6/28

so lighting is harder than i thought.


the point light is good for the effect of the lamp on other obejctrs in the scene, but i need to be able to actually see the lamp

this video talks about using EffectComposer https://www.youtube.com/watch?v=d0C_bxzG850
o maybe what i want to read about is postprocessing in general...
oh yeah what i want is bloom
they got that unreal bloom.... okay cooool


# 6/23

lets see if we can make her stand when she's not moving and also turn in the direction she's walking

we're just gonna do some simple texturing right quick by manually drwaing something in aseprite. i just want it to be something that's not a blank expanse

yeah i mean it's meh. you can tell it's a repeated texture. i really do want to do procedurally generated ground pixels. but not yet

hm the lighting is weirder than i thought. they're invisible except for thow they affect the environment. this might be a thing

# 6/22

ok lets see if i can click to move

hell yeha got the raycaster working

ok now i need to make her walk there.
i think first i'll teleport her
then do interpolation
then get it so that she idles when she's not moving, and does the walking anim when she is
and then maybe refactor the Person class to do this nicely using anim tags from aseprite

so the built in three js vector3 lerp has a param that is like the percentage between the origin and the target... i dont think thats super useful to me bc i want the walk speed to be the same, no matter the distance

what i want is like the direction between current location and target
and then every frame move greta <walkSpeed> in that direction
yeah ane maybe there can be some acceleration at the beginning and end if i'm fancy but nahhhh

i got some cool vibrating glitch effects that i'd love to try to do on purpose later. but it basically works! still dont have her idling when she's not moving, but im gonna eat lunch

# 6/18

getting this ground textured is turning out to be harder than i thought and i'm tired of it so i'm going to try to do something else next. i want to be able to click somewhere, and the character will walk there. like runescape

# 6/16

ok the lots-of-little-planes was too slow. i guess there might still be a way to make it work... if we preload it? or look into why its so slow to create the geometries. or just figure out a way to wait on the load without making the browser totally unresponsive

but i kind of want to try doing it in shaders anyway. going to be using ShaderMaterial and this threejsfundamentals article: https://threejsfundamentals.org/threejs/lessons/threejs-shadertoy

i'm looking at one of the examples from the ShaderMaterial docs and realizing that it would be nice to just be able to click and drag to rotate the cam. i'm going to try to add that quickly. maybe its using a lib or something

well that took a lot more work than i thought it would. turns out es6/typescript requires modules to be made ready for it or something

i think i'll get a GUI for some sliders while i'm at it

# 6/15

going to do walking animation now

got the ground plane working woo

now i want to make it like a pixelated texture to signify grass

maybe a render target?
https://threejsfundamentals.org/threejs/lessons/threejs-rendertargets.html

but using shadermaterial is probably the more performant/correct way, i'll try that first
https://threejsfundamentals.org/threejs/lessons/threejs-shadertoy.html

in the shower i thought of an idea of just using a ton of tiny planes. i wonder if this would work and not make things crash etc.

one thing i could do is to handraw the pixel texture, but actually i want to procgen it. i think that's important

i tried the tons of tiny planes and it's too slow!!! no! but also woo!!! exilirating. i guess it's time to try the GPU shader method next

# 6/14

omg there's a threejsfundamentals hahaha
https://threejsfundamentals.org/

i dont think i'm going to pour over this and go step-by-step like i did for webgl. but there is this article on transparency that i stumbled upon that i think will help
https://threejsfundamentals.org/threejs/lessons/threejs-transparency.html

i dont think i want directional lighting, or at least not that realistic effect that i'm getting from this phong material. i think i do want flat lighting. but i also want to get some effect from point lights
maybe the demo i should strive for is:
a character or two walking around
the ground has that pixel texture
pixelart/dynamic lighting fire ... and/or pixelart/dynamic lighting fireflies and/or pixelart/dynamic lighting lampposts
these are all different lights moods. or are they?

well i did the thing anyway where i read through the threejsfundamentals intro. i did learn a couple things, like that you can pass a canvas into WebGLRenderer which is nice

i got the plane to be transparent, which is sick. next i should animate the walk cycle, or start getting a ground in.

# 6/13

<p> i am very hungover. this is my first devlog on this project, which i started about a month ago. the first 2-3 weeks were really just me learning webgl and then i took a week break. i've been cleaning my appt. at the same time which i think has been informing my design interests a little.</p>

<p> i've gotten to a point where i'm realizing writing all the low level webgl stuff myself in vanilla js is maybe needlessly sadistic. i finally got a perspective view working, but my sprite is flipped upside down, and i know it has something to do with a quirk of the matrix math but i dont really care anymore.</p>

<p> i was kind of expecting to hit this point. i wish i got a little further, like implementing basic lighting and procgen textures. and i'm still not sure if i can get the visual effect that i want with using an engine/library. but if i can, it would probably make the process more enjoyable. so that's what i'm going to do now: explore some tools
<p> <a href="https://webglfundamentals.org/webgl/lessons/webgl-2d-vs-3d-library.html">this post</a> from webglfundamentals makes me think i should use threes.js</p>

<p>yeah looks like three.js is the ticket. going to try to do what i want to do with threejs now. i'm a little worried that it wont let me do weird shader stuff... but im sure it has support for that right?</p>


