<html lang="en">
  <head>
    <style>
      body {
        margin: 0;
      }

      canvas {
        width: 100%;
        height: 100%;
      }
    
    </style>
  
  </head>
  <body>
    <canvas id="world"></canvas>
  </body>
  <script id="vertex-shader-2d" type="notjs">
    // so now we're assuming this is pixel position on screen
    attribute vec4 a_position;

    attribute vec2 a_texCoord;

    varying vec2 v_texCoord;

    uniform vec2 u_resolution;
    uniform vec2 u_translation;
    uniform mat4 u_transform;

    // we just need a scale and translate bc we know the sheet is horizontal
    uniform float u_sheetScale;
    uniform float u_sheetTranslate;

    // all shaders have a main function
    void main() {


      gl_Position = u_transform * a_position;

      vec2 texCoordTranslated = a_texCoord + vec2(u_sheetTranslate, 0.0);
      v_texCoord = texCoordTranslated / vec2(u_sheetScale, 1.0);
    }
  </script>
  <script id="fragment-shader-2d" type="notjs">
    // fragment shaders don't have a dfault precision so we need to 
    // pick one. mediump is a good default
    precision mediump float;

    uniform sampler2D u_image;

    varying vec2 v_texCoord;

    void main() {

      gl_FragColor = texture2D(u_image, v_texCoord);
    }
  </script>
  <script id="fragment-shader-pixel-grass" type="notjs">
    // fragment shaders don't have a dfault precision so we need to 
    // pick one. mediump is a good default
    // precision mediump float;

    // uniform sampler2D u_image;

    // varying vec2 v_texCoord;
    float rand1(vec2 st) {
      return fract(sin(dot(st.xy,
                           vec2(12.9898,78.233)))*
          43758.5453123);
    }

    float rand2(vec2 x)
    {
        int n = int(x.x * 40.0 + x.y * 6400.0);
        n = (n << 13) ^ n;
        return 1.0 - float( (n * (n * n * 15731 + 789221) + \
                 1376312589) & 0x7fffffff) / 1073741824.0;
    }

    void main() {
    
    
      gl_FragColor = vec4(rand1(floor(gl_FragCoord.xy)), 
			  1.0, 
			  1.0,
			  1.0);
    }
  </script>
  <script src="https://webglfundamentals.org/webgl/resources/webgl-utils.js"></script>
  <script src="./index.js"></script>
</html>
